********************
Networking in Linux
********************

Get IP
============

To see which IP-adress our system has, we can use to ip-command ::

    $ ip addr show
    1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
        link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
        inet 127.0.0.1/8 scope host lo
           valid_lft forever preferred_lft forever
        inet6 ::1/128 scope host 
           valid_lft forever preferred_lft forever
    2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 9001 qdisc pfifo_fast state UP group default qlen 1000
        link/ether 06:b1:a2:05:28:70 brd ff:ff:ff:ff:ff:ff
        inet 172.31.34.37/20 brd 172.31.47.255 scope global dynamic eth0
           valid_lft 2512sec preferred_lft 2512sec
        inet6 fe80::4b1:a2ff:fe05:2870/64 scope link 
           valid_lft forever preferred_lft forever

or ifconfig-command::

    $ ifconfig
    eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 9001
            inet 172.31.34.37  netmask 255.255.240.0  broadcast 172.31.47.255
            inet6 fe80::4b1:a2ff:fe05:2870  prefixlen 64  scopeid 0x20<link>
            ether 06:b1:a2:05:28:70  txqueuelen 1000  (Ethernet)
            RX packets 29831  bytes 10208360 (9.7 MiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 18150  bytes 9186321 (8.7 MiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
    
    lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
            inet 127.0.0.1  netmask 255.0.0.0
            inet6 ::1  prefixlen 128  scopeid 0x10<host>
            loop  txqueuelen 1000  (Lokale Schleife)
            RX packets 44639  bytes 14972446 (14.2 MiB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 44639  bytes 14972446 (14.2 MiB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

==============
IP Route Show
==============

So how do we know where to go when we need to contact systems outside of our network? In order for us to reach networks outside of our own, we need to know the gateway IP adress. This device is what will routes are outbound traffic to these other networks. We could check our default gateway that our system contacts with the IP route Show Command::

    $ ip route show

Older way::

    $ route

or ::

    $ netstat -r
    Kernel IP Routentabelle
    Ziel            Router          Genmask         Flags   MSS Fenster irtt Iface
    default         ip-172-31-32-1. 0.0.0.0         UG        0 0          0 eth0
    link-local      0.0.0.0         255.255.0.0     U         0 0          0 eth0
    172.31.32.0     0.0.0.0         255.255.240.0   U         0 0          0 eth0


By default our assistant will contact the DNS servers that are listed in etc/resolve.conf ::

    $ cat /etc/resolv.conf
    ; generated by /usr/sbin/dhclient-script
    search eu-central-1.compute.internal
    nameserver 172.31.0.2


Host-comand
=============

To Test DNS-Host-Name resolution::

    host google.com
    google.com has address 216.58.210.14
    google.com has IPv6 address 2a00:1450:4001:814::200e
    google.com mail is handled by 50 alt4.aspmx.l.google.com.
    google.com mail is handled by 10 aspmx.l.google.com.
    google.com mail is handled by 20 alt1.aspmx.l.google.com.
    google.com mail is handled by 30 alt2.aspmx.l.google.com.
    google.com mail is handled by 40 alt3.aspmx.l.google.com.


Ping-Command
==============

Most common for troubleshooting network. If not sure about network connection just use the ping-command::

    $ ping <host or IP>

    ping google.com
    PING google.com (172.217.18.110) 56(84) bytes of data.
    64 bytes from fra16s42-in-f14.1e100.net (172.217.18.110): icmp_seq=1 ttl=51 time=0.885 ms
    64 bytes from fra16s42-in-f14.1e100.net (172.217.18.110): icmp_seq=2 ttl=51 time=0.893 ms
    64 bytes from fra16s42-in-f14.1e100.net (172.217.18.110): icmp_seq=3 ttl=51 time=0.918 ms
    64 bytes from fra16s42-in-f14.1e100.net (172.217.18.110): icmp_seq=4 ttl=51 time=0.952 ms
    64 bytes from fra16s42-in-f14.1e100.net (172.217.18.110): icmp_seq=5 ttl=51 time=0.967 ms


==================
'-c' (count) Flag
==================

Stop after sending count ECHO_REQUEST packets. With deadline option, ping waits for count ECHO_REPLY packets, until the timeout expires. ::

    $ ping -c 3 google.com

Another location that can house name resolution settings for us is in the local etc. Host file. ::

    $ cat /etc/hosts
    127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
    ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

Can also ping localhost::

    ping -c 3 localhost
